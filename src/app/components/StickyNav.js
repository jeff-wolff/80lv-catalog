"use client"
import React, { useEffect, useState } from 'react';
import Link from 'next/link';
import Image from 'next/image';
import FilterNav from './FilterNav';

import styles from './StickyNav.module.css';

const StickyNav = () => {
    const [isSticky, setSticky] = useState(false);

    const handleScroll = () => {
        const offset = window.scrollY;
        const target = document.querySelector('.theCarousel').offsetHeight;
        // console.log(offset, target);
        if (offset > target) {
            setSticky(true);
        } else {
            setSticky(false);
        }
    };

    useEffect(() => {
        window.addEventListener('scroll', handleScroll);
        return () => {
            window.removeEventListener('scroll', handleScroll);
        };
    }, []);    

    return (
        <div className={`${styles.stickyNav} ${isSticky ? styles.stickyNavOpen : ''}`}>
            <div className={`${styles.container} container`}>
                <div className={styles.logo}>
                    <Link href="/">
                        <Image
                            src={`/assets/images/80lv-logo.svg`}
                            alt={`80lv Cloud Experiences`}
                            width={271}
                            height={36}
                            className={styles.headerLogo}
                        />
                    </Link>
                </div>        
                <div>
                    <div className={styles.stickyFilterMobile}>
                        <a href="https://80.lv/cloud-experiences#start" className="button button-icon-only" target="_blank">
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M6.91074 6.42259C7.23618 6.74803 7.76382 6.74803 8.08926 6.42259L9.16667 5.34518V12.5C9.16667 12.9602 9.53976 13.3333 10 13.3333C10.4602 13.3333 10.8333 12.9602 10.8333 12.5V5.34518L11.9107 6.42259C12.2362 6.74803 12.7638 6.74803 13.0893 6.42259C13.4147 6.09715 13.4147 5.56951 13.0893 5.24408L10.5893 2.74408C10.2638 2.41864 9.73618 2.41864 9.41074 2.74408L6.91074 5.24408C6.58531 5.56951 6.58531 6.09715 6.91074 6.42259ZM2.5 10V12.7011V12.7011C2.49999 13.3719 2.49998 13.9255 2.53683 14.3765C2.5751 14.8449 2.65724 15.2755 2.86331 15.68C3.18289 16.3072 3.69283 16.8171 4.32003 17.1367C4.72448 17.3428 5.15507 17.4249 5.62348 17.4632C6.07448 17.5 6.62811 17.5 7.29892 17.5H12.7011C13.3719 17.5 13.9255 17.5 14.3765 17.4632C14.8449 17.4249 15.2755 17.3428 15.68 17.1367C16.3072 16.8171 16.8171 16.3072 17.1367 15.68C17.3428 15.2755 17.4249 14.8449 17.4632 14.3765C17.5 13.9255 17.5 13.3718 17.5 12.701V10C17.5 9.53976 17.1269 9.16667 16.6667 9.16667C16.2064 9.16667 15.8333 9.53976 15.8333 10L15.8333 12.6667C15.8333 13.3805 15.8327 13.8657 15.802 14.2408C15.7722 14.6061 15.7181 14.793 15.6517 14.9233C15.4919 15.2369 15.2369 15.4919 14.9233 15.6517C14.793 15.7181 14.6061 15.7722 14.2408 15.802C13.8657 15.8327 13.3805 15.8333 12.6667 15.8333H7.33333C6.61952 15.8333 6.13427 15.8327 5.7592 15.802C5.39385 15.7722 5.20702 15.7181 5.07668 15.6517C4.76308 15.4919 4.50811 15.2369 4.34832 14.9233C4.28192 14.793 4.22781 14.6061 4.19796 14.2408C4.16732 13.8657 4.16667 13.3805 4.16667 12.6667L4.16667 10C4.16667 9.53976 3.79357 9.16667 3.33333 9.16667C2.8731 9.16667 2.5 9.53976 2.5 10Z" fill="currentColor"/></svg>    
                        </a>
                        <Link href="#" className="button button-icon-only button-tertiary" style={{ 'marginRight': '0.625rem' }}>
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M9.02474 5.00016H17.5003C17.9606 5.00016 18.3337 5.37326 18.3337 5.8335C18.3337 6.29373 17.9606 6.66683 17.5003 6.66683H9.02474C8.68154 7.63782 7.75551 8.3335 6.66699 8.3335C5.57848 8.3335 4.65244 7.63782 4.30925 6.66683H2.50033C2.04009 6.66683 1.66699 6.29373 1.66699 5.8335C1.66699 5.37326 2.04009 5.00016 2.50033 5.00016H4.30925C4.65244 4.02917 5.57848 3.3335 6.66699 3.3335C7.75551 3.3335 8.68154 4.02917 9.02474 5.00016ZM5.83366 5.8335C5.83366 6.29373 6.20675 6.66683 6.66699 6.66683C7.12723 6.66683 7.50033 6.29373 7.50033 5.8335C7.50033 5.37326 7.12723 5.00016 6.66699 5.00016C6.20675 5.00016 5.83366 5.37326 5.83366 5.8335ZM15.6914 13.3335H17.5003C17.9606 13.3335 18.3337 13.7066 18.3337 14.1668C18.3337 14.6271 17.9606 15.0002 17.5003 15.0002H15.6914C15.3482 15.9712 14.4222 16.6668 13.3337 16.6668C12.2451 16.6668 11.3191 15.9712 10.9759 15.0002H2.50033C2.04009 15.0002 1.66699 14.6271 1.66699 14.1668C1.66699 13.7066 2.04009 13.3335 2.50033 13.3335H10.9759C11.3191 12.3625 12.2451 11.6668 13.3337 11.6668C14.4222 11.6668 15.3482 12.3625 15.6914 13.3335ZM12.5003 14.1668C12.5003 14.6271 12.8734 15.0002 13.3337 15.0002C13.7939 15.0002 14.167 14.6271 14.167 14.1668C14.167 13.7066 13.7939 13.3335 13.3337 13.3335C12.8734 13.3335 12.5003 13.7066 12.5003 14.1668Z" fill="currentColor"/></svg>
                        </Link>
                    </div>
                    <div className={styles.stickyFilterDesktop}>
                        <FilterNav />
                        <a href="https://80.lv/cloud-experiences#start" className="button" target="_blank" style={{'marginRight': '8px'}}>
                            Upload your build&nbsp;&nbsp;
                            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fillRule="evenodd" clipRule="evenodd" d="M6.91074 6.42259C7.23618 6.74803 7.76382 6.74803 8.08926 6.42259L9.16667 5.34518V12.5C9.16667 12.9602 9.53976 13.3333 10 13.3333C10.4602 13.3333 10.8333 12.9602 10.8333 12.5V5.34518L11.9107 6.42259C12.2362 6.74803 12.7638 6.74803 13.0893 6.42259C13.4147 6.09715 13.4147 5.56951 13.0893 5.24408L10.5893 2.74408C10.2638 2.41864 9.73618 2.41864 9.41074 2.74408L6.91074 5.24408C6.58531 5.56951 6.58531 6.09715 6.91074 6.42259ZM2.5 10V12.7011V12.7011C2.49999 13.3719 2.49998 13.9255 2.53683 14.3765C2.5751 14.8449 2.65724 15.2755 2.86331 15.68C3.18289 16.3072 3.69283 16.8171 4.32003 17.1367C4.72448 17.3428 5.15507 17.4249 5.62348 17.4632C6.07448 17.5 6.62811 17.5 7.29892 17.5H12.7011C13.3719 17.5 13.9255 17.5 14.3765 17.4632C14.8449 17.4249 15.2755 17.3428 15.68 17.1367C16.3072 16.8171 16.8171 16.3072 17.1367 15.68C17.3428 15.2755 17.4249 14.8449 17.4632 14.3765C17.5 13.9255 17.5 13.3718 17.5 12.701V10C17.5 9.53976 17.1269 9.16667 16.6667 9.16667C16.2064 9.16667 15.8333 9.53976 15.8333 10L15.8333 12.6667C15.8333 13.3805 15.8327 13.8657 15.802 14.2408C15.7722 14.6061 15.7181 14.793 15.6517 14.9233C15.4919 15.2369 15.2369 15.4919 14.9233 15.6517C14.793 15.7181 14.6061 15.7722 14.2408 15.802C13.8657 15.8327 13.3805 15.8333 12.6667 15.8333H7.33333C6.61952 15.8333 6.13427 15.8327 5.7592 15.802C5.39385 15.7722 5.20702 15.7181 5.07668 15.6517C4.76308 15.4919 4.50811 15.2369 4.34832 14.9233C4.28192 14.793 4.22781 14.6061 4.19796 14.2408C4.16732 13.8657 4.16667 13.3805 4.16667 12.6667L4.16667 10C4.16667 9.53976 3.79357 9.16667 3.33333 9.16667C2.8731 9.16667 2.5 9.53976 2.5 10Z" fill="currentColor"/></svg>    
                        </a>
                    </div>
                </div>
            </div>
        </div>
    );
};

export default StickyNav;